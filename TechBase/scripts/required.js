/*** @author admin*/function techBaseLoginListener(userName, password) {	var 	sessionRef 		= currentSession(), // Get session.	promoteToken 	= sessionRef.promoteWith("Admin"), //temporarily make this session Admin level.	theGroups 		= [],	myUser 			= ds.User.find("login = :1", userName);		sessionRef.unPromote(promoteToken); //put the session back to normal.		if (myUser === null) {		myUser = directory.user(userName);				if(myUser != null && directory.computeHA1(userName, password) == myUser.password){			var			theGroupsTemp = myUser.groups.toArray('name');						for(var i = 0 ; i<theGroupsTemp.length ; i++){				theGroups.push(theGroupsTemp[i].name);			}						return {				name		: myUser.name,				fullName	: myUser.fullName,				belongsTo	: theGroups,				ID			: myUser.ID			}		}				return false;	} else {		if (myUser.validatePassword(password)) {						switch (myUser.role) {				case "client":				theGroups = ['client'];				break;						case "tech":				theGroups = ['tech'];				break;				case "admin":				theGroups = ['Admin'];				break;			}									return {				ID: myUser.ID,				name: myUser.login,				fullName: myUser.fullName,				belongsTo: theGroups			}		} else {			return {error: 1024, errorMessage: "invalid login"};		}	}}